<%= stylesheet_link_tag 'custom', media: 'all', 'data-turbolinks-track': 'reload' %>
<%= flash[:alert] %>
<div class="container mx-auto">
  <div class="row my-3 justify-content-center">
    <div class="col-lg-8 col-md-10">
      <h2 class="mb-4" style="font-size: 1.3rem;">注文情報入力</h2>

      <%= form_with model: @order, url: confirm_orders_path, method: :get do |f| %>
        <!-- 支払方法 -->
        <div class="mb-3">
          <h3 style="font-size: 1.3rem; font-weight: bold;">支払方法</h3>
          <div class="form-check">
            <%= f.radio_button :payment, 'credit_card', id: 'payment_credit_card', class: 'form-check-input' %>
            <%= f.label :payment_credit_card, Order.payments_i18n[:credit_card], for: 'payment_credit_card', class: 'form-check-label' %>
          </div>
          <div class="form-check">
            <%= f.radio_button :payment, 'transfer', id: 'payment_transfer', class: 'form-check-input' %>
            <%= f.label :payment_transfer, Order.payments_i18n[:transfer], for: 'payment_transfer', class: 'form-check-label' %>
          </div>
        </div>

        <!-- お届け先 -->
        <div class="mb-3">
          <h3 style="font-size: 1.3rem; font-weight: bold;">お届け先</h3>

          <!-- 自分の住所 -->
          <div class="form-check">
            <%= f.radio_button :select_address, 'my_address', id: 'address_my_address', checked: true, class: 'form-check-input' %>
            <%= f.label :select_address, 'ご自身の住所', for: 'address_my_address', class: 'form-check-label' %>
            <div class="pl-4">
              〒<%= @order.customer.post_code %> <%= @order.customer.address %><br>
              <%= @order.customer.last_name %><%= @order.customer.first_name %>
            </div>
          </div>

          <!-- 登録済み住所 -->
          <div class="form-check mt-2">
            <%= f.radio_button :select_address, 'registered_address', id: 'address_registered_address', class: 'form-check-input' %>
            <%= f.label :select_address, '登録済住所から選択', for: 'address_registered_address', class: 'form-check-label' %>
            <div class="pl-4 mt-1">
              <%= f.select :address_id, options_from_collection_for_select(@addresses, :id, :address_display), {}, class: 'form-control' %>
            </div>
          </div>

          <!-- 新しい住所 -->
          <div class="form-check mt-2">
            <%= f.radio_button :select_address, 'new_address', id: 'address_new_address', class: 'form-check-input' %>
            <%= f.label :select_address, '新しいお届け先', for: 'address_new_address', class: 'form-check-label' %>
          </div>
          <div class="pl-4 mt-2">
            <div class="form-group">
              <%= f.label :post_code, '郵便番号(ハイフンなし)', class: 'form-label' %>
              <%= f.text_field :post_code, placeholder: "郵便番号", class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.label :address, '住所', class: 'form-label' %>
              <%= f.text_field :address, placeholder: "住所", class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.label :name, '宛名', class: 'form-label' %>
              <%= f.text_field :name, placeholder: "宛名", class: 'form-control' %>
            </div>
          </div>
        </div>

        <!-- 確認ボタン -->
        <div class="text-center mt-4">
          <%= f.submit "確認画面へ進む", class: 'btn btn-primary px-4' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
